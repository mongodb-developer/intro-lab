import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# üëê Optimize the Query


Now let‚Äôs adjust the `getBook` method to take advantage of the patterns we just discussed.

<Tabs groupId="server">
<TabItem value="node" label="üöÄ NodeJS/Express">

Open the `server/src/controllers/books.ts` file, and look for the `getBook` method. How could you rewrite this query to be blazing fast, and meet the requirements that we defined for this application?
:::tip
How many calls do you need to do to your database now? Do you still need an aggregation pipeline? Look in the [documentation](https://www.mongodb.com/docs/manual/reference/method/db.collection.findOne/) for the `findOne` method.
:::
<details>
  <summary>Click here to see the answer</summary>

<div>
```ts
    public async getBook(bookId: string): Promise<Book> {
        /**
          * Optimized Code
          */
        const book = await collections?.books?.findOne({ _id: bookId });

        return book;
    }
```

</div>
</details>

</TabItem>

<TabItem value="java" label="‚òïÔ∏è Java Spring Boot">
Open the BookService class, and look for the getBook method. How could you simplify this code to make it blazing fast, using the patterns we just discussed?

<details>
  <summary>Click here to see the answer</summary>

<div>
```java
  public Optional<Book> getBook(String id) {
    return bookRepository.findById(id);
  }
```
</div>
</details>

</TabItem>



</Tabs>


