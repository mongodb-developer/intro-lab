{"searchDocs":[{"title":"📘 图书馆管理系统应用程序","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/demo-app/intro","content":"📘 图书馆管理系统应用程序 在整个会议期间，您将会使用我们提供的图书馆管理系统应用程序与数据进行交互。此应用程序使用 Angular 前端和 Node.js 后端。该应用程序已经构建并部署到 Github Codespace，因此您不需要在本地环境中安装任何东西。您可以从浏览器访问该应用程序。 我们的图书馆管理应用程序利用了您将在本次会议中探索的数据建模模式。当您浏览应用程序时，您会看到这些模式如何在实际中发挥作用，从而增强用户体验和系统效率。 我们的图书馆应用程序使用户能够探索丰富的图书目录、搜索特定书名、深入了解书籍详情，甚至通过评论分享他们的想法。用户还可以预订未来阅读的书籍。在幕后，MongoDB 的数据建模模式在确保应用程序的灵活性、可扩展性和性能方面起着至关重要的作用。 对于图书馆员工，程序中实现了一个管理面板提供了管理图书借阅和归还的功能。当我们引导您浏览该应用程序时，您将发现我们迄今讨论的各种设计模式是如何无缝集成的，以优化数据存储、检索和整体系统性能。 现在让我们为您设置这个应用程序。","keywords":"","version":"当前版本"},{"title":"👐 配置应用程序","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/demo-app/configure","content":"","keywords":"","version":"当前版本"},{"title":"重新加载客户端​","type":1,"pageTitle":"👐 配置应用程序","url":"/intro-lab/zh/docs/demo-app/configure#重新加载客户端","content":" 现在服务器正在运行，你可以重新加载客户端以查看应用程序。  在右上角的面板中，点击刷新图标以重新加载客户端。    点击此图标将重新加载客户端。现在你应该已经连接到数据库，应该会看到网页中列出了一些书籍。 ","version":"当前版本","tagName":"h2"},{"title":"👐 获取您的连接字符串","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/importing-data/get-connection-string","content":"👐 获取您的连接字符串 为了将数据集加载到您的集群中，您需要获取集群的连接字符串。 在 Atlas UI 中，导航到 Overview 页面。在 Clusters section，点击 Connect。 一个 UI 窗口将显示几种连接到数据库的方式。 选择 Compass。虽然我们不会使用 Compass 来导入数据，但这是查看连接字符串的一种简便方法。 查找您的连接字符串。它应类似于 mongodb+srv://&lt;username&gt;:&lt;password&gt;@&lt;cluster-url&gt;/ 点击连接字符串旁边的复制按钮将其复制到您的剪贴板。将连接字符串粘贴到一个安全的地方。在整个培训过程中，您将多次需要此连接字符串。 提示 别忘了将 &lt;password&gt; 替换为您创建集群时设置的密码。","keywords":"","version":"当前版本"},{"title":"👐 导入图书馆数据","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/importing-data/import-data","content":"👐 导入图书馆数据 现在您已经有了连接字符串，可以将图书馆数据导入到您的项目中。 为此，我们构建了一个导入应用程序，它会将数据从我们的数据库复制到您的集群中。您需要向导入应用程序提供您的连接字符串。 警告 您不应该与任何人分享您的连接字符串。它包含您的数据库凭据，任何拥有它的人都可以读取和写入您的数据库数据。 要导入数据，请先访问 导入应用程序。 您会看到这个简洁的界面。 将您的连接字符串粘贴到输入框中，然后点击 Import Library Data(导入图书馆数据) 按钮。 您应该会看到一条消息，表明导入已开始。 Starting data import 备注 导入数据可能需要几分钟。这是一个伸展身体或喝杯咖啡的好时机！☕ 几分钟后，您应该会看到导入作业成功完成的消息。 一旦数据复制到您的集群中，您就可以开始构建您的应用程序了。","keywords":"","version":"当前版本"},{"title":"👐 启动应用程序","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/demo-app/start-app","content":"","keywords":"","version":"当前版本"},{"title":"选项 1：在 Codespace 中运行​","type":1,"pageTitle":"👐 启动应用程序","url":"/intro-lab/zh/docs/demo-app/start-app#选项-1在-codespace-中运行","content":" 信息 🚀 快速开始： 点击这里 开始新的 Codespace 或恢复上次的 Codespace！  最简单的启动应用程序的方法就是在 Codespace 中运行。Codespace 是一个云托管的、容器化的开发环境，你可以从 Visual Studio Code 连接到它。它预配置了你需要的所有工具来构建和运行应用程序。  对于这个应用程序，你甚至可以使用在线 IDE 编辑代码，并看到运行的应用程序中反映的更改。  要在 Codespace 中启动应用程序，点击 Code 按钮。然后，寻找 Codespaces 标签。点击 Create Codespace on main 按钮。这将为你创建一个新的 Codespace 并启动应用程序。    让它运行几秒钟，因为它正在准备你的环境。它将克隆仓库，准备容器，并运行安装脚本。一旦准备好，你会看到一个 IDE，其中有一个预览窗口显示正在运行的应用程序。  备注 再次提醒，这可能需要几分钟。现在是喝杯咖啡的好时机 ☕️    ","version":"当前版本","tagName":"h2"},{"title":"暴露服务器端口​","type":1,"pageTitle":"👐 启动应用程序","url":"/intro-lab/zh/docs/demo-app/start-app#暴露服务器端口","content":" 为了让应用程序在该环境中正常工作，你需要对 codespace 进行一个小改动。你需要暴露服务器运行的端口。  在 IDE 底部寻找 Ports 标签。    点击该标签后，你会看到一个端口列表。右键点击 Server (5000) 行。然后选择 Port Visibility，然后选择 Public。    你会看到 Visibility 列中的文本变为 Public。  就是这样，你现在可以进入下一部分了。  ","version":"当前版本","tagName":"h3"},{"title":"🦸 选项 2：本地运行​","type":1,"pageTitle":"👐 启动应用程序","url":"/intro-lab/zh/docs/demo-app/start-app#-选项-2本地运行","content":" 如果你更喜欢在本地运行应用程序，可以按照以下步骤进行。请记住，在本实验的后续步骤中我们将使用 GitHub Codespaces，因此你可能需要调整一些命令。  信息 在实验过程中我们将使用 GitHub Codespaces，这些说明仅在你无法使用 Codespaces 或者你 真的非常非常 想要本地安装的情况下使用。  首先，将仓库克隆到你的本地机器。  git clone git@github.com:mongodb-developer/library-management-system.git   然后，切换到 library-management-system 目录。  cd library-management-system   现在进入 client 和 server 目录并安装依赖项。  cd client npm install cd ../server npm install   启动服务器应用程序。  npm start   然后，在另一个终端窗口，启动客户端应用程序。  cd client npm start   你现在有客户端运行在 http://localhost:4200 ，服务器运行在 http://localhost:5000。 ","version":"当前版本","tagName":"h2"},{"title":"📘 图书馆管理系统数据集","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/importing-data/intro","content":"📘 图书馆管理系统数据集 此数据集包含超过 6,700 份图书文档和大约 6,250 位相关作者。数据使用了 MongoDB 中一些最常见的数据建模技术进行结构化。这些技术在开发者日的“数据建模实践课程”中有涵盖。","keywords":"","version":"当前版本"},{"title":"👐 Build a compound index following the ESR rule","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/indexing/create-compound-index","content":"","keywords":"","version":"当前版本"},{"title":"Explore the code​","type":1,"pageTitle":"👐 Build a compound index following the ESR rule","url":"/intro-lab/zh/docs/indexing/create-compound-index#explore-the-code","content":" Open the file server/src/indexing/borrowed-books-index.ts file in your GitHub Codespace. Examine the code to build a compound index on the borrowedBooks collection. /** * Create the index to support the following query: * issueDetails.find({ * 'user._id': userID, * borrowDate: { $gte: date }, * }, { * sort: { returnedDate: -1 } * }) */ await collections?.issueDetails?.createIndex({ // Equality 'user._id': 1, // Sort returnedDate: 1, // Range borrowDate: 1, }); 信息 The index is created on the borrowedBooks collection to support the query that finds the issue details for a user with a specific userID, where the borrowDate is greater than or equal to a specific date, and sorts the results by returnedDate in descending order. This is compound index and it follows the ESR rule: Equality, Sort, and Range. This ensures optimal performance for the query. Execute the script to create the compound index. npx tsx src/indexing/borrowed-books-index.ts After a few seconds, you should see the following output: Connecting to MongoDB Atlas... Connected! BEFORE creating the index Winning plan stage: COLLSCAN No index used Total documents examined: 1284 Number of documents returned: 3 ----------------------------- AFTER creating the index Winning plan stage: IXSCAN Index used: user._id_1_returnedDate_1_borrowDate_1 Total documents examined: 3 Number of documents returned: 3 信息 The script uses explain plans to compare the query plans before and after creating the index. Notice the difference in the winning plan stage and the number of documents examined before and after creating the index.  ","version":"当前版本","tagName":"h2"},{"title":"🦸‍♀️ Try different indexes​","type":1,"pageTitle":"👐 Build a compound index following the ESR rule","url":"/intro-lab/zh/docs/indexing/create-compound-index#️-try-different-indexes","content":" Modify the compound index by adding and removing fields, and observe the changes in the query explain plans. ","version":"当前版本","tagName":"h2"},{"title":"介绍","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/intro","content":"","keywords":"","version":"当前版本"},{"title":"最低硬件要求：​","type":1,"pageTitle":"介绍","url":"/intro-lab/zh/docs/intro#最低硬件要求","content":" ","version":"当前版本","tagName":"h2"},{"title":"操作系统：​","type":1,"pageTitle":"介绍","url":"/intro-lab/zh/docs/intro#操作系统","content":" Windows: Windows 10（版本 1903 或更高）macOS: macOS Catalina（10.15）或更高  ","version":"当前版本","tagName":"h3"},{"title":"处理器：​","type":1,"pageTitle":"介绍","url":"/intro-lab/zh/docs/intro#处理器","content":" Intel: Core i5 或更好AMD: Ryzen 5 或同等处理器Apple Silicon: M1 芯片或更高  ","version":"当前版本","tagName":"h3"},{"title":"内存:​","type":1,"pageTitle":"介绍","url":"/intro-lab/zh/docs/intro#内存","content":" 最低 RAM: 8 GB推荐 RAM: 16 GB 或更多，以便更顺畅地进行多任务处理和更高要求的应用程序。  ","version":"当前版本","tagName":"h3"},{"title":"存储：​","type":1,"pageTitle":"介绍","url":"/intro-lab/zh/docs/intro#存储","content":" 至少 256 GB 的可用空间，最好是 SSD，以实现更快的读写速度。  ","version":"当前版本","tagName":"h3"},{"title":"互联网连接：​","type":1,"pageTitle":"介绍","url":"/intro-lab/zh/docs/intro#互联网连接","content":" 稳定的高速互联网连接（最低 15 Mbps）以优化使用云端应用程序的性能。  ","version":"当前版本","tagName":"h3"},{"title":"建议：​","type":1,"pageTitle":"介绍","url":"/intro-lab/zh/docs/intro#建议","content":" 确保您的系统软件是最新的，以便利用最新的功能和安全增强。考虑使用至少 1080p 分辨率的显示器，以在演示和动手课程中获得更清晰、更详细的视觉体验。  ","version":"当前版本","tagName":"h2"},{"title":"其他要求：​","type":1,"pageTitle":"介绍","url":"/intro-lab/zh/docs/intro#其他要求","content":" 安装 Google Chrome。拥有 GitHub 账户。确保您的笔记本电脑可以访问 GitHub 和 GitHub Codespaces。  满足这些硬件规格，您将能充分参与我们的开发者日内容。我们期待与所有参与者一起度过一个激动人心且富有成效的活动！ ","version":"当前版本","tagName":"h2"},{"title":"👐 创建您的账户","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/mongodb-atlas/create-account","content":"","keywords":"","version":"当前版本"},{"title":"注册 MongoDB Atlas​","type":1,"pageTitle":"👐 创建您的账户","url":"/intro-lab/zh/docs/mongodb-atlas/create-account#注册-mongodb-atlas","content":" 首先访问 MongoDB 网站 并创建您的账户。  提示 创建 MongoDB Atlas 账户是免费的，不需要信用卡。  您将看到如下表单。    信息 如果您在活动中进行此实验，请使用您注册活动时的相同电子邮件地址。  填写表单并点击“Create Your Atlas Account”按钮。  ","version":"当前版本","tagName":"h2"},{"title":"验证您的电子邮件地址​","type":1,"pageTitle":"👐 创建您的账户","url":"/intro-lab/zh/docs/mongodb-atlas/create-account#验证您的电子邮件地址","content":" 您将收到来自 MongoDB 的电子邮件，要求您验证您的电子邮件地址。点击邮件中的链接以验证您的电子邮件地址。    警告 如果在两分钟内没有收到邮件，请检查您的垃圾邮件文件夹。  ","version":"当前版本","tagName":"h3"},{"title":"完成注册流程​","type":1,"pageTitle":"👐 创建您的账户","url":"/intro-lab/zh/docs/mongodb-atlas/create-account#完成注册流程","content":" 您将被重定向到 MongoDB Atlas 的注册向导。填写表单并点击“Finish”以继续。 ","version":"当前版本","tagName":"h3"},{"title":"📘 介绍","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/optimize/intro","content":"📘 介绍 如果您亲自参加了MongoDB团队的这次课程，您已经学习了数据建模的概念和最佳实践。您导入的数据使用了课程中介绍的架构，但代码示例正在像查询关系数据库一样查询数据。在这个练习中，您将更新代码以使用您在课程中了解到的数据模型。 备注 如果您没有和我们一起参加这次课程，我们建议您先完成MongoDB大学上的数据建模课程，然后再尝试这个练习。","keywords":"","version":"当前版本"},{"title":"👐 部署一个数据库集群","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/mongodb-atlas/create-cluster","content":"","keywords":"","version":"当前版本"},{"title":"创建一个新集群​","type":1,"pageTitle":"👐 部署一个数据库集群","url":"/intro-lab/zh/docs/mongodb-atlas/create-cluster#创建一个新集群","content":" 在概览页面，点击绿色按钮 “+ Create”。    备注 如果您刚创建了您的账户，您将自动被重定向到集群创建页面，可以跳过此步骤。  您将被重定向到集群创建页面。在这里您可以选择将数据存储在哪个云服务商和地区。您还可以选择要创建的集群类型。对于本教程，我们将使用免费实例规格。  对于集群层，选择 M0，这是免费实例规格。在 Name 输入框中，输入名称 'DeveloperDay'（一个词，不含空格）。取消选中 Automate security setup 复选框。您将在下一步骤手动设置安全性。取消选中 Preload sample dataset 复选框。您将在本教程后面导入数据集。选择您喜欢的云服务商和离您最近的地区。最后，点击绿色按钮 “Create Deployment”。    一旦您完成了流程中最困难的部分（验证码），您将被重定向到安全快速入门。  ","version":"当前版本","tagName":"h2"},{"title":"安全快速入门​","type":1,"pageTitle":"👐 部署一个数据库集群","url":"/intro-lab/zh/docs/mongodb-atlas/create-cluster#安全快速入门","content":" 默认情况下，您的 MongoDB Atlas 部署是完全锁定的。您需要配置网络设置并创建一个用户来访问您的数据库。  在您的部署正在配置时，您将看到安全快速入门对话框。  ","version":"当前版本","tagName":"h2"},{"title":"网络访问​","type":1,"pageTitle":"👐 部署一个数据库集群","url":"/intro-lab/zh/docs/mongodb-atlas/create-cluster#网络访问","content":" 首先，您应该 允许从任何地方访问。您将看到一个预填的 IP 地址 0.0.0.0/0。这意味着您可以从任何 IP 地址连接到您的数据库，包括您将用于此实验的虚拟环境。点击 Add IP Address 将此 IP 地址添加到网络允许列表。  警告 将您的数据库暴露给整个世界是很危险的。在真实生产环境中绝不要这样做。  ","version":"当前版本","tagName":"h3"},{"title":"数据库用户​","type":1,"pageTitle":"👐 部署一个数据库集群","url":"/intro-lab/zh/docs/mongodb-atlas/create-cluster#数据库用户","content":" 接下来，您需要创建一个数据库用户。选择您想要的任何用户名和密码。这将在您想要连接到数据库时使用。点击 Create Database User 创建用户。  如果您刚创建了您的账户，Atlas 可能会自动为您创建用户。在这种情况下，用户名和密码将与您的 Atlas 账户凭据相匹配。  提示 请确保记住您的用户名和密码。您以后会需要它们。 为了本次工作坊的顺利进行，使用一个您能记住的简单密码可能比更复杂的安全密码更好。 不要在密码中使用任何特殊字符。尽管 MongoDB 允许一些特殊字符，但它们可能与您将在本次工作坊中使用的工具不兼容。  ","version":"当前版本","tagName":"h3"},{"title":"手动网络访问配置​","type":1,"pageTitle":"👐 部署一个数据库集群","url":"/intro-lab/zh/docs/mongodb-atlas/create-cluster#手动网络访问配置","content":" 如果您没有看到 Allow Access from Anywhere 按钮，您应该关闭对话框并转到左侧栏 Security 部分下的 Network Access 标签。点击 Add IP Address 按钮，添加 IP 地址 0.0.0.0/0 并点击 Confirm。  ","version":"当前版本","tagName":"h3"},{"title":"就这些！​","type":1,"pageTitle":"👐 部署一个数据库集群","url":"/intro-lab/zh/docs/mongodb-atlas/create-cluster#就这些","content":" 就这些！您有了一个新的数据库集群，现在可以从您的应用程序连接到它。如果一切顺利，您应该在数据库部署屏幕上看到新创建的集群。   ","version":"当前版本","tagName":"h2"},{"title":"📘 什么是 MongoDB Atlas","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/mongodb-atlas/what-is-mongodb","content":"","keywords":"","version":"当前版本"},{"title":"为什么使用 MongoDB Atlas？​","type":1,"pageTitle":"📘 什么是 MongoDB Atlas","url":"/intro-lab/zh/docs/mongodb-atlas/what-is-mongodb#为什么使用-mongodb-atlas","content":" 使用 MongoDB Atlas 有很多理由，但最主要的是，MongoDB Atlas 是开始使用 MongoDB 最简单的方法。  除此之外，MongoDB Atlas 提供了许多您自己设置时需要配置的功能。例如，MongoDB Atlas 提供了：  Atlas Search - 一个强大的搜索引擎，允许您搜索数据Atlas Data Federation - 一种查询存储在 AWS S3 或 Google Cloud Storage 中的数据的方法Atlas Vector Search - 一种使用 AI 增强数据的方法  ","version":"当前版本","tagName":"h2"},{"title":"MongoDB Atlas 部署在哪里？​","type":1,"pageTitle":"📘 什么是 MongoDB Atlas","url":"/intro-lab/zh/docs/mongodb-atlas/what-is-mongodb#mongodb-atlas-部署在哪里","content":" 您可以选择 MongoDB Atlas 集群部署的云提供商和区域。MongoDB Atlas 可用于所有主要的云提供商，包括 AWS、Azure 和 Google Cloud。  它还在世界许多地区可用。您可以选择离您最近的区域或离您的用户最近的区域。  您还可以通过从您选择的云提供商市场直接安装 MongoDB Atlas，从而简化 MongoDB Atlas 集群的所有计费和管理。  ","version":"当前版本","tagName":"h2"},{"title":"MongoDB Atlas 的费用是多少？​","type":1,"pageTitle":"📘 什么是 MongoDB Atlas","url":"/intro-lab/zh/docs/mongodb-atlas/what-is-mongodb#mongodb-atlas-的费用是多少","content":" MongoDB Atlas 对于学习和开发是免费的。您可以创建一个免费集群，并无限期使用它。您也可以创建任意数量的免费集群。 ","version":"当前版本","tagName":"h2"},{"title":"👐 优化查询","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/optimize/optimize","content":"👐 优化查询 既然你已经了解了我们在数据模式中使用的模式，现在你可以重写 getBook 方法来检索书籍信息。 打开 server/src/controllers/books.ts 文件，查找 getBook 方法。你如何重写这个查询，使其速度飞快，并满足我们为这个应用程序定义的要求？ 提示 你现在需要对数据库进行多少次调用？你仍然需要一个聚合管道吗？查看 文档 了解 findOne 方法。 点击这里查看答案 public async getBook(bookId: string): Promise&lt;Book&gt; { /** * 优化后的代码 */ const book = await collections?.books?.findOne({ _id: bookId }); return book; } ","keywords":"","version":"当前版本"},{"title":"🦸‍♀️ 为 authors 集合启用验证","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/schema-validation/validate-authors","content":"🦸‍♀️ 为 authors 集合启用验证 在这个练习中，您将为 authors 集合定义一个 JSON 模型，将模型应用于集合，并通过插入一个不符合模型的文档来测试模型校验功能。 这是一个需要您编写代码的高级练习。如果您遇到困难并且正在参加一个现场会议，您可以请求室内的讲师帮助。 首先打开 GitHub Codespace 中的 server/src/schema-validation/apply-schema.ts 文件，并取消注释第 41-61 行。完成标有 // TODO 注释的任务。再次执行脚本以将模型应用于 authors 集合。 cd server node dist/schema-validation/apply-schema.js 最后，通过插入一个不符合模型的文档来测试模型验证。","keywords":"","version":"当前版本"},{"title":"📘 什么是模型校验及其重要性","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/schema-validation/what-is-schema-validation","content":"","keywords":"","version":"当前版本"},{"title":"什么是模型校验？​","type":1,"pageTitle":"📘 什么是模型校验及其重要性","url":"/intro-lab/zh/docs/schema-validation/what-is-schema-validation#什么是模型校验","content":" 在 MongoDB 中，模型校验涉及使用 JSON Schema 定义校验规则，这是一种用于校验 JSON 文档结构和内容的强大工具。这些规则可以指定以下要求：  字段类型： 确保某些字段是特定的数据类型（例如，字符串、整数、数组）。必需字段： 确保某些字段在所有文档中都必须存在。数值范围： 确保数值字段在特定范围内。字符串模式： 确保字符串字段匹配某些正则表达式。  ","version":"当前版本","tagName":"h2"},{"title":"为什么使用模型校验？​","type":1,"pageTitle":"📘 什么是模型校验及其重要性","url":"/intro-lab/zh/docs/schema-validation/what-is-schema-validation#为什么使用模型校验","content":" 数据完整性： 通过强制执行模式，你可以防止无效数据插入到集合中，从而保持数据集的完整性。一致性： 模型校验确保所有文档遵循一致的结构，使查询和管理数据更加容易。错误预防： 在数据库级别捕捉模式违规行为，有助于在数据输入过程的早期识别错误，减少以后的数据相关问题。简化应用逻辑： 由于由数据库处理模型校验，应用程序开发人员可以更多地关注业务逻辑，而不是数据校验。增强协作： 对于使用共享数据库的团队，模型校验有助于确保所有团队成员遵循相同的数据结构规范，减少误解和错误。  ","version":"当前版本","tagName":"h2"},{"title":"总结​","type":1,"pageTitle":"📘 什么是模型校验及其重要性","url":"/intro-lab/zh/docs/schema-validation/what-is-schema-validation#总结","content":" 在本节中，你将探索 users 和 authors 集合的 JSON 模式，运行脚本将模式应用于集合，并通过插入不符合模式的文档来测试模型校验。 ","version":"当前版本","tagName":"h2"},{"title":"📘 使用的模式","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/optimize/patterns","content":"","keywords":"","version":"当前版本"},{"title":"可用书籍 - 计算字段​","type":1,"pageTitle":"📘 使用的模式","url":"/intro-lab/zh/docs/optimize/patterns#可用书籍---计算字段","content":" 我们可以做的第一件事是在插入或更新书籍时计算可用书籍的数量。这样，我们每次检索书籍时就不必重新计算。  既然我们有了这个计算字段，我们就不需要聚合管道的所有后续阶段，可以直接查询书籍集合。  ","version":"当前版本","tagName":"h2"},{"title":"评论 - 子集​","type":1,"pageTitle":"📘 使用的模式","url":"/intro-lab/zh/docs/optimize/patterns#评论---子集","content":" 对于评论，我们知道用户通常只查看前五个评论。我们可以将前五个评论存储在书籍文档中，只有在需要显示更多评论时才查询评论集合。  ","version":"当前版本","tagName":"h2"},{"title":"作者 - 扩展引用​","type":1,"pageTitle":"📘 使用的模式","url":"/intro-lab/zh/docs/optimize/patterns#作者---扩展引用","content":" 对于作者信息，我们可以存储作者 ID 以及作者姓名，而不是仅存储作者 ID。这样，我们不必查询作者集合即可显示作者姓名。 ","version":"当前版本","tagName":"h2"},{"title":"👐 为 users 集合启用验证","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/schema-validation/validate-users","content":"","keywords":"","version":"当前版本"},{"title":"数据库用户权限​","type":1,"pageTitle":"👐 为 users 集合启用验证","url":"/intro-lab/zh/docs/schema-validation/validate-users#数据库用户权限","content":" 要更新任何数据库集合的验证器，您的数据库用户必须具有管理员权限。请按照以下步骤确保您的用户具有正确的权限：  打开 Atlas UI。在左侧菜单中，导航到 Network Settings 并选择 Database Access。在列表中找到您的数据库用户。检查 MongoDB Roles 列中用户的角色。如果角色不是 atlasAdmin@admin，您需要更新它。如果角色不是 atlasAdmin@admin，请点击用户旁边的 Edit 按钮。向下滚动到 Database User Privileges 部分并展开 Built-in Role 下拉菜单。从下拉菜单中选择 Atlas admin。点击 Update User 保存更改。  Atlas 会在几秒钟内部署更改。  ","version":"当前版本","tagName":"h2"},{"title":"探索 JSON 模式​","type":1,"pageTitle":"👐 为 users 集合启用验证","url":"/intro-lab/zh/docs/schema-validation/validate-users#探索-json-模式","content":" users 集合的 JSON 模式存储在 server/src/schema-validation/apply-schema.ts 文件中。在您的 GitHub Codespace 中打开该文件并检查模式。  const userSchema = { bsonType: 'object', required: ['name', 'isAdmin'], properties: { name: { bsonType: 'string', minLength: 5, description: 'must be a string and is required' }, isAdmin: { bsonType: 'bool', description: 'must be a boolean and is required' } } };   该模式定义了以下约束：  必填字段是 name 和 isAdmin。name 字段必须是长度至少为 5 个字符的字符串。isAdmin 字段必须是布尔值。  ","version":"当前版本","tagName":"h2"},{"title":"探索应用模式的脚本​","type":1,"pageTitle":"👐 为 users 集合启用验证","url":"/intro-lab/zh/docs/schema-validation/validate-users#探索应用模式的脚本","content":" 检查 apply-schema.ts 文件中模式定义之后的代码行。您将看到一个将模式应用于 users 集合的函数。  console.log('Applying schema validation for users...'); const resultUsers = await db.command({ collMod: 'users', validator: { $jsonSchema: userSchema }, validationLevel: 'strict', validationAction: 'error' });   该函数使用 db.command() 方法将模式应用于 users 集合。  collMod 选项指定要应用模式的集合。validator 选项指定用于验证的 JSON 模式。这是上面声明的 userSchema 对象。validationLevel 选项指定要执行的验证级别。这可以是 strict 或 moderate。 如果设置为 strict，文档只有在通过验证时才会被插入和更新。如果设置为 moderate，集合中现有文档的更新将不检查其是否符合验证规则。 最后，validationAction 选项指定在文档验证失败时采取的操作。这可以是 error 或 warn。 如果设置为 error，MongoDB 会拒绝任何违反验证标准的插入或更新。如果设置为 warn，操作会继续进行，但违规行为会记录在 MongoDB 日志中。  ","version":"当前版本","tagName":"h2"},{"title":"将模型应用于 users 集合​","type":1,"pageTitle":"👐 为 users 集合启用验证","url":"/intro-lab/zh/docs/schema-validation/validate-users#将模型应用于-users-集合","content":" 您需要运行脚本将模型应用于 users 集合。  在您的 GitHub Codespace 中打开一个新的终端仿真器标签。 定位底部面板并点击 TERMINAL 标签。定位终端面板右上角的 + 图标，点击它打开一个新的终端标签。点击新的终端标签激活它。 运行以下命令将模式应用于 users 集合： cd server node dist/schema-validation/apply-schema.js 您可能会被提示允许粘贴到终端。点击 Allow 以粘贴命令。 按回车键运行命令。几秒钟后，您应该会看到以下输出： Connecting to MongoDB Atlas... Connected! Applying schema validation for users... Schema validation enabled!   警告 如果您看到与用户权限相关的错误，请返回到数据库用户权限部分并更新您的用户权限。  ","version":"当前版本","tagName":"h2"},{"title":"测试模型验证​","type":1,"pageTitle":"👐 为 users 集合启用验证","url":"/intro-lab/zh/docs/schema-validation/validate-users#测试模型验证","content":" 现在已经为 users 集合启用了模型校验，您可以通过插入不符合模型的文档来测试它。  打开 Atlas UI。在您的集群下点击 Browse Collections。导航到 users 集合 —— 它是列表中的最后一个集合。点击右侧的 Insert Document 按钮，然后点击 Insert。  您应该会看到一条错误消息。在错误消息的最底部，您应该会看到以下内容：  &quot;schemaRulesNotSatisfied&quot;: [{ &quot;operatorName&quot;: &quot;required&quot;, &quot;specifiedAs&quot;: {&quot;required&quot;: [&quot;name&quot;,&quot;isAdmin&quot;]}, &quot;missingProperties&quot;: [&quot;isAdmin&quot;,&quot;name&quot;] }]   错误描述了 name 和 isAdmin 字段是必需的，但在您尝试插入的文档中缺失了这些字段。  再次插入包含 name 和 isAdmin 字段的文档，您应该会看到文档成功插入。  ","version":"当前版本","tagName":"h2"},{"title":"总结​","type":1,"pageTitle":"👐 为 users 集合启用验证","url":"/intro-lab/zh/docs/schema-validation/validate-users#总结","content":" 在这个练习中，您探索了 users 集合的 JSON 模型，运行了一个脚本将模型应用到集合，并通过插入不符合模型的文档测试了模型验证。  在下一个练习中，您将为 authors 集合启用模型验证。 ","version":"当前版本","tagName":"h2"},{"title":"🎯 总结","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/summary","content":"🎯 总结 恭喜你！通过本教程，你已经成功地完成了以下任务： 创建了一个 MongoDB Atlas 账户在云中部署了你的第一个 MongoDB 集群安装了额外的工具，如 Compass导入了图书馆示例数据集 访问 MongoDB 开发者中心 获取更多有用的信息和教程。","keywords":"","version":"当前版本"},{"title":"ℹ️ GitHub Codespaces Issues","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/troubleshooting/github-codespaces-wont-launch copy","content":"","keywords":"","version":"当前版本"},{"title":"1. Ports Not Made Public​","type":1,"pageTitle":"ℹ️ GitHub Codespaces Issues","url":"/intro-lab/zh/docs/troubleshooting/github-codespaces-wont-launch copy#1-ports-not-made-public","content":" Step-by-Step Guide:  Check Port Visibility Settings: Open your Codespace.Click on the Ports tab in the lower panel.Locate the ports you need to make public (e.g., 5000, 4200). Make Ports Public: Click on the lock icon next to the port number to change it from private to public.Ensure the status changes to public. Verify Application Configuration: Ensure your application is configured to listen on the correct ports. Check your application’s settings to make sure it’s set to bind to all network interfaces. For example, in a Node.js application: javascript Copy code const PORT = process.env.PORT || 5000; app.listen(PORT, '0.0.0.0', () =&gt; { console.log(`Server running on port ${PORT}`); });  ","version":"当前版本","tagName":"h3"},{"title":"2. Authentication Issues​","type":1,"pageTitle":"ℹ️ GitHub Codespaces Issues","url":"/intro-lab/zh/docs/troubleshooting/github-codespaces-wont-launch copy#2-authentication-issues","content":" Step-by-Step Guide:  Check GitHub Authentication: Ensure you are logged into GitHub from your Codespace.Run gh auth status to verify authentication status.If not authenticated, run gh auth login and follow the prompts to log in. Access Permissions: Verify that you have the necessary permissions to access the repository.Check if you are part of the correct team or organization that owns the repository.  ","version":"当前版本","tagName":"h3"},{"title":"3. Environment Setup Problems​","type":1,"pageTitle":"ℹ️ GitHub Codespaces Issues","url":"/intro-lab/zh/docs/troubleshooting/github-codespaces-wont-launch copy#3-environment-setup-problems","content":" Step-by-Step Guide:  Check Devcontainer Configuration: Ensure your .devcontainer/devcontainer.json file is correctly configured. Example configuration: json Copy code { &quot;name&quot;: &quot;My Codespace&quot;, &quot;image&quot;: &quot;mcr.microsoft.com/vscode/devcontainers/base:0-focal&quot;, &quot;features&quot;: { &quot;ghcr.io/devcontainers/features/docker-outside-of-docker:1&quot;: {} }, &quot;forwardPorts&quot;: [5000, 4200] } Rebuild Codespace: Sometimes rebuilding the Codespace can resolve setup issues.Open the Command Palette (Ctrl+Shift+P), search for Codespaces: Rebuild Container, and select it.  ","version":"当前版本","tagName":"h3"},{"title":"4. Slow or Unresponsive Codespace​","type":1,"pageTitle":"ℹ️ GitHub Codespaces Issues","url":"/intro-lab/zh/docs/troubleshooting/github-codespaces-wont-launch copy#4-slow-or-unresponsive-codespace","content":" Step-by-Step Guide:  Monitor Resource Usage: Check the resource usage of your Codespace.Open the terminal and use commands like top or htop to monitor CPU and memory usage. Adjust Machine Type: If your Codespace is consistently slow, consider upgrading to a more powerful machine type.You can do this from the Codespace configuration settings on GitHub.  ","version":"当前版本","tagName":"h3"},{"title":"5. Errors During Application Startup​","type":1,"pageTitle":"ℹ️ GitHub Codespaces Issues","url":"/intro-lab/zh/docs/troubleshooting/github-codespaces-wont-launch copy#5-errors-during-application-startup","content":" Step-by-Step Guide:  Review Logs: Check the application logs for errors.Open the terminal in your Codespace and review the output of your application’s startup command. Common Errors and Fixes: Port Already in Use: Ensure no other processes are using the required ports.Use lsof -i :5000 or lsof -i :4200 to check for processes using these ports and kill them if necessary. Missing Environment Variables: Ensure all necessary environment variables are set.Add them to your .env file or set them directly in the Codespace settings.  ","version":"当前版本","tagName":"h3"},{"title":"Additional Resources and Support​","type":1,"pageTitle":"ℹ️ GitHub Codespaces Issues","url":"/intro-lab/zh/docs/troubleshooting/github-codespaces-wont-launch copy#additional-resources-and-support","content":" GitHub Codespaces Documentation: GitHub CodespacesGitHub CLI Authentication: gh auth loginCommon Environment Setup: Devcontainer Features  ","version":"当前版本","tagName":"h3"},{"title":"Summary​","type":1,"pageTitle":"ℹ️ GitHub Codespaces Issues","url":"/intro-lab/zh/docs/troubleshooting/github-codespaces-wont-launch copy#summary","content":" In this section, you explored commonly occuring github codespaces issues and their resolutions. Don't hesitate to ask the instructor for assistance if these solutions do not resolve the problem. ","version":"当前版本","tagName":"h2"},{"title":"ℹ️ Connection Issues","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/troubleshooting/connection-string-issues","content":"","keywords":"","version":"当前版本"},{"title":"Troubleshooting Guide: Atlas URI Connection Issues​","type":1,"pageTitle":"ℹ️ Connection Issues","url":"/intro-lab/zh/docs/troubleshooting/connection-string-issues#troubleshooting-guide-atlas-uri-connection-issues","content":" Problem:​  Users are unable to connect the Library Management Application to the Atlas cluster due to a missing or misconfigured Atlas URI connection string.  Common Causes:​  The connection string is not correctly copied from the Atlas cluster.The connection string is missing from the application configuration.Incorrect formatting or missing credentials in the connection string.Complex passwords (those passwords containing special characters). Avoid these - for this lab, please keep passwords simple. Alternatively, if you must have a special character in your password, please make sure you URL Encode the password. You can use this tool to accomplish this.  Solutions:​  ","version":"当前版本","tagName":"h3"},{"title":"1. Verify the Atlas Connection String​","type":1,"pageTitle":"ℹ️ Connection Issues","url":"/intro-lab/zh/docs/troubleshooting/connection-string-issues#1-verify-the-atlas-connection-string","content":" Step-by-Step Guide:  Access Your Atlas Cluster: Log in to your MongoDB Atlas account.Navigate to the Clusters view.Click on the Connect button for your desired cluster. Copy the Connection String: In the Connect to Cluster dialog, select the &quot;Connect your application&quot; option. Ensure the connection string is for &quot;Standard connection string (SRV)&quot; format. Copy the provided connection string. It should look something like this: mongodb+srv://&lt;username&gt;:&lt;password&gt;@cluster0.mongodb.net/&lt;dbname&gt;?retryWrites=true&amp;w=majority  ","version":"当前版本","tagName":"h3"},{"title":"2. Configure the Connection String in Your Application​","type":1,"pageTitle":"ℹ️ Connection Issues","url":"/intro-lab/zh/docs/troubleshooting/connection-string-issues#2-configure-the-connection-string-in-your-application","content":" Step-by-Step Guide:  Locate Configuration File: Open the .env file for your Library Management Application. Update the .env File: Paste the connection string into the .env file, replacing the placeholder values (&lt;username&gt;, &lt;password&gt;, &lt;dbname&gt;) with your actual MongoDB Atlas credentials and database name. Example of a correctly formatted .env file: PORT=5000 DATABASE_URI=mongodb+srv://yourUsername:yourPassword@cluster0.mongodb.net DATABASE_NAME=library SECRET=yourSecret Save and Restart: Save the .env file.Restart your application to apply the changes.  ","version":"当前版本","tagName":"h3"},{"title":"3. Check for Common Errors in Connection String​","type":1,"pageTitle":"ℹ️ Connection Issues","url":"/intro-lab/zh/docs/troubleshooting/connection-string-issues#3-check-for-common-errors-in-connection-string","content":" Step-by-Step Guide:  Validate Credentials: Ensure the username and password in the connection string are correct.Verify that the user has the necessary permissions to access the database. Format Verification: Ensure the connection string follows the correct format: mongodb+srv://username:password@cluster.mongodb.net Common mistakes include: Missing mongodb+srv:// at the beginning.Incorrect placement of colons : and at-sign @.Spaces or typos within the string. Network Access: Ensure your IP address is whitelisted in the Atlas Network Access settings.Navigate to Network Access in the Atlas UI and add your current IP address if it’s not already listed.  ","version":"当前版本","tagName":"h3"},{"title":"4. Test the Connection​","type":1,"pageTitle":"ℹ️ Connection Issues","url":"/intro-lab/zh/docs/troubleshooting/connection-string-issues#4-test-the-connection","content":" Step-by-Step Guide:  Run a Connection Test: Use a MongoDB client (e.g., MongoDB Compass, mongo shell) to test the connection string.If the connection is successful, it confirms that the string is correctly formatted. Review Error Messages: Check the logs of your Library Management Application for any error messages.Common errors might indicate issues like &quot;Authentication failed,&quot; &quot;Network timeout,&quot; or &quot;Unknown host.&quot;  ","version":"当前版本","tagName":"h3"},{"title":"Resources and Further Assistance​","type":1,"pageTitle":"ℹ️ Connection Issues","url":"/intro-lab/zh/docs/troubleshooting/connection-string-issues#resources-and-further-assistance","content":" MongoDB Atlas Documentation: Connect to Your ClusterLibrary Management Application Loader Script: Loader Script  ","version":"当前版本","tagName":"h3"},{"title":"Summary​","type":1,"pageTitle":"ℹ️ Connection Issues","url":"/intro-lab/zh/docs/troubleshooting/connection-string-issues#summary","content":" In this section, you explored commonly occuring connection issues and their resolutions. Don't hesitate to ask the instructor for assistance if these solutions do not resolve the problem. ","version":"当前版本","tagName":"h2"},{"title":"ℹ️ Search Problems","type":0,"sectionRef":"#","url":"/intro-lab/zh/docs/troubleshooting/no-search-results-appearing","content":"","keywords":"","version":"当前版本"},{"title":"1. Forgetting to Create the Atlas Search Index​","type":1,"pageTitle":"ℹ️ Search Problems","url":"/intro-lab/zh/docs/troubleshooting/no-search-results-appearing#1-forgetting-to-create-the-atlas-search-index","content":" Step-by-Step Guide:  Access MongoDB Atlas: Log in to your MongoDB Atlas account.Navigate to your cluster and select the Collections tab. Create the Search Index: Select the database and collection where you want to create the search index.Click on the Indexes tab and then on Create Index.Choose Search Index from the index type options. Configure the Index: Provide a meaningful name for your search index (e.g., fulltextsearch).Configure the index fields as needed for your application. Save and Build the Index: Save the configuration and allow MongoDB Atlas to build the search index.  ","version":"当前版本","tagName":"h3"},{"title":"2. Misnaming the Search Index​","type":1,"pageTitle":"ℹ️ Search Problems","url":"/intro-lab/zh/docs/troubleshooting/no-search-results-appearing#2-misnaming-the-search-index","content":" Step-by-Step Guide:  Verify the Search Index Name: Ensure that the search index name used in your application configuration matches the name in MongoDB Atlas.Commonly recommended name: fulltextsearch. Correct the Index Name if Necessary: If the index was named incorrectly, you can either rename it in your Atlas UI or update your application configuration to match the correct name. Update Application Configuration: Ensure your application’s code or configuration file references the correct search index name. Example configuration in a .env file: SEARCH_INDEX_NAME=fulltextsearch  ","version":"当前版本","tagName":"h3"},{"title":"3. Configuring the Application with an Incorrectly Named Search Index​","type":1,"pageTitle":"ℹ️ Search Problems","url":"/intro-lab/zh/docs/troubleshooting/no-search-results-appearing#3-configuring-the-application-with-an-incorrectly-named-search-index","content":" Step-by-Step Guide:  Check the Application Configuration: Open the configuration file where the search index name is specified (commonly .env or a settings file in your application).Verify that the SEARCH_INDEX_NAME matches the index name in your MongoDB Atlas cluster. Update the Configuration: If the name is incorrect, update it to match the exact name used in MongoDB Atlas. Example: SEARCH_INDEX_NAME=fulltextsearch Restart the Application: Save the configuration file.Restart your application to apply the changes.  ","version":"当前版本","tagName":"h3"},{"title":"4. Additional Common Configuration Issues​","type":1,"pageTitle":"ℹ️ Search Problems","url":"/intro-lab/zh/docs/troubleshooting/no-search-results-appearing#4-additional-common-configuration-issues","content":" Step-by-Step Guide:  Verify Field Mappings: Ensure the fields specified in the search index configuration match the fields in your documents.Check for any typos or discrepancies in field names. Check for Case Sensitivity: MongoDB field names and index names are case-sensitive. Ensure consistency in naming conventions. Review Index Configuration: Access the index configuration in MongoDB Atlas and review settings such as analyzers and field types.Ensure that the settings align with your application’s search requirements.  ","version":"当前版本","tagName":"h3"},{"title":"Testing the Search Configuration​","type":1,"pageTitle":"ℹ️ Search Problems","url":"/intro-lab/zh/docs/troubleshooting/no-search-results-appearing#testing-the-search-configuration","content":" Step-by-Step Guide:  Run a Sample Query: Test the search functionality directly in MongoDB Atlas using the Aggregation Pipeline Builder.Example aggregation pipeline: [ { &quot;$search&quot;: { &quot;index&quot;: &quot;fulltextsearch&quot;, &quot;text&quot;: { &quot;query&quot;: &quot;sample text&quot;, &quot;path&quot;: &quot;field_name&quot; } } } ] ``` Check Application Logs: Review your application logs for any error messages related to search queries.Common errors might indicate issues like &quot;index not found&quot; or &quot;field not indexed&quot;.  ","version":"当前版本","tagName":"h3"},{"title":"Resources and Further Assistance​","type":1,"pageTitle":"ℹ️ Search Problems","url":"/intro-lab/zh/docs/troubleshooting/no-search-results-appearing#resources-and-further-assistance","content":" MongoDB Atlas Search Documentation: Atlas SearchCreating and Managing Search Indexes: Create IndexesAggregation Pipeline Builder: Pipeline Builder  ","version":"当前版本","tagName":"h3"},{"title":"Summary​","type":1,"pageTitle":"ℹ️ Search Problems","url":"/intro-lab/zh/docs/troubleshooting/no-search-results-appearing#summary","content":" In this section, you explored commonly occuring github codespaces issues and their resolutions. Don't hesitate to ask the instructor for assistance if these solutions do not resolve the problem. ","version":"当前版本","tagName":"h2"}],"options":{"languages":["en","zh"],"id":"default"}}